RewriteEngine On

FileETag MTime Size

#RewriteCond %{REQUEST_URI} \/HejPanel\/
#RewriteCond %{HTTPS} off
#RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteRule ^php/pages/404.php php/pages/404.php [END,L]

RewriteCond %{HTTP_HOST} ^api.
RewriteRule ^([\w.-]*)/?(.*)?$ php/api/$1.php?$2 [END,L]

RewriteRule ^api/(\w+)/?(.*)?$ php/api/$1.php?$2 [END,L]

RewriteRule ^(js|css)/(.*)\.(js|css) generated/handler.php?type=$1&modules=$2 [END,L]

RewriteRule ^serviceworker.js serviceworker.js [END,L]
RewriteRule ^robots.txt robots.txt [END,L]
RewriteRule ^sitemap.xml sitemap.xml [END,L]

RewriteCond %{REQUEST_URI} !(assets)
RewriteRule ^(\w+)/(.*)/(.*)$ index.php?page=$1&subpage=$2&$3 [END,L]

RewriteCond %{REQUEST_URI} !(assets|tasks)
RewriteRule ^(\w+)/(.*)/?$ index.php?page=$1&subpage=$2 [END,L]

RewriteCond %{REQUEST_URI} !(assets|tasks)
RewriteRule ^(.*)/?$ index.php?page=$1 [END,L]

<If "%{REQUEST_URI} =~ /HejPanel/">
ErrorDocument 404 /HejPanel/php/pages/404.php
</If>
<Else>
ErrorDocument 404 /HejPanel/php/pages/404.php
</Else>

<IfModule mod_expires.c>  
  ExpiresActive on
  ExpiresDefault "access plus 2 days"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/svg+xml "access 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType text/javascript "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType application/x-shockwave-flash "access plus 1 month"
  ExpiresByType image/ico "access plus 1 month"
  ExpiresByType image/x-icon "access plus 1 month"
  ExpiresByType text/html "access plus 600 seconds"
</IfModule>  

<IfModule mod_deflate.c>
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/vnd.ms-fontobject
AddOutputFilterByType DEFLATE application/x-font
AddOutputFilterByType DEFLATE application/x-font-opentype
AddOutputFilterByType DEFLATE application/x-font-otf
AddOutputFilterByType DEFLATE application/x-font-truetype
AddOutputFilterByType DEFLATE application/x-font-ttf
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE font/opentype
AddOutputFilterByType DEFLATE font/otf
AddOutputFilterByType DEFLATE font/ttf
AddOutputFilterByType DEFLATE image/svg+xml
AddOutputFilterByType DEFLATE image/x-icon
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/javascript
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/xml
</IfModule>
